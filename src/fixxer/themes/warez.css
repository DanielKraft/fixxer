/* ==============================================================================
 * FIXXER TUI v12.1 - VisionCrew Edition CSS
 * ============================================================================== */

/* Base colors (variables) must be defined at the root */
$background: rgb(10, 10, 10);
/* Very dark grey, almost black */
$surface: rgb(20, 20, 20);
/* Panel background */
$primary: #C00000;
/* Bright Red */
$secondary: #FFFFFF;
/* White */
$text: #CCCCCC;
/* Off-white text */
$status-ok: #00FFFF;
/* Cyan for "Ready" status */

Screen {
    layout: vertical;
    background: $background;
    color: $text;
    border: solid $primary;
    /* Simple border, no width percentage */
}

/* ==============================================================================
 * Layout & Containers
 * ============================================================================== */

#header-row {
    height: auto;
    width: 100%;
    align: left middle;
}

#logo {
    width: 1fr;
    height: auto;
    text-align: left;
    /* Left-aligned logo */
    padding: 1 2;
}

.easy-btn {
    width: auto;
    height: auto;
    min-width: 14;
    margin: 1 2 1 0;
    background: $surface;
    color: $primary;
    border: solid $primary 50%;
}

.easy-btn:hover {
    background: $primary;
    color: $background;
    border: solid $primary;
    text-style: bold;
}

.panel-title {
    height: auto;
    padding-bottom: 1;
    color: $primary;
    text-style: bold;
}

#left-panel {
    padding-right: 1;
    width: 1fr;
    height: 100%;
}

#right-panel {
    padding-left: 1;
    width: 1fr;
    height: 100%;
}

#main-layout {
    height: 1fr;
}

/* ==============================================================================
 * Widgets
 * ============================================================================== */

Button {
    outline: none;
}

Button:focus {
    border: solid $primary;
}

/* --- Scrollbar Styling (Red to match theme) --- */
Scrollbar {
    background: $surface;
    color: $primary;
}

Scrollbar:hover {
    color: #FF0000;
}

Scrollbar.-active {
    color: #FF4444;
}

/* --- File Browser --- */
#file-browser-container {
    height: 1fr;
    background: $surface;
    border: solid $primary;
    padding: 1;
}

DirectoryTree {
    background: $surface;
}

.directory-tree--guides {
    color: $primary 50%;
}

.directory-tree--selected {
    background: $primary !important;
    color: $background !important;
    text-style: bold;
}

/* --- Status & Logs --- */
#status-bar {
    height: auto;
    margin-bottom: 1;
    padding: 0 1;
    background: $surface;
    border: solid $primary;
}

/* --- System Monitor --- */
#system-monitor {
    height: auto;
    max-height: 8;
    /* Reduced from 9 for tighter fit */
    width: 100%;
    layout: vertical;
    margin-bottom: 1;
    padding: 1 2 0 2;
    /* Top padding for RAM peaks, no bottom padding */
    background: $background;
    border: solid $surface;
}

.sysmon-row {
    height: auto;
    width: 100%;
    align: left middle;
    padding: 0;
    margin: 0;
}

.sysmon-label {
    width: 6;
    color: $text;
    /* Changed from $primary to muted text */
    text-style: bold;
}

.sysmon-sparkline {
    width: 1fr;
    height: 3;
    margin: 0 1;
}

.sysmon-value {
    width: 5;
    text-align: right;
    color: $primary;
    /* Keep values in red */
    text-style: bold;
}

#sysmon-error {
    color: $text 50%;
    text-align: center;
}

/* Sparkline styling - RED for VisionCrew tactical look */
#ram-sparkline {
    color: $primary !important;
    /* Force red for RAM */
}

#cpu-sparkline {
    color: $primary !important;
    /* Force red for CPU */
}

#log-panel {
    height: 1fr;
    min-height: 20;
    /* Increased from 15 for better visibility */
    max-height: 1fr;
}

#log-container {
    height: 1fr;
    background: $surface;
    padding: 0 1;
    border: solid $primary;
}

/* --- Progress Spinner Container --- */
#progress-container {
    height: auto;
    width: 100%;
    padding: 0 1;
    background: $surface;
    margin-bottom: 1;
    border: solid $primary;
}

#progress-container Horizontal {
    height: auto;
    width: 100%;
}

#spinner-display {
    height: auto;
    padding-bottom: 0;
    text-align: center;
    color: $primary;
}

#progress-phrase {
    height: auto;
    padding-top: 0;
    color: #00FFFF;
    width: 1fr;
}

#progress-timer {
    height: auto;
    color: #00FFFF;
    text-align: right;
    width: auto;
}

/* --- Button Bar --- */
#button-bar {
    height: auto;
    width: 100%;
    align: center middle;
    padding: 1 0;
    layout: horizontal;
    background: $background;
}

/* RAM and CPU monitors hidden in footer for standard mode */
/* (They appear in right panel above Status & Logs instead) */
#ram-monitor,
#cpu-monitor {
    display: none;
}

#controls-container {
    width: 100%;
    height: auto;
    align: center middle;
}

#header-right {
    width: auto;
    height: auto;
    align: right middle;
}

/* View mode label hidden in standard mode */
#view-mode-label {
    display: none;
}

.btn-group {
    height: auto;
    width: auto;
    align: center middle;
    margin: 0 2;
}

.workflow-btn,
.path-btn {
    margin: 0 1;
    width: auto;
    min-width: 10;
    background: $surface;
    color: #ffffff;
    border: solid $primary 50%;
}

.workflow-btn:hover,
.path-btn:hover,
.control-btn:hover {
    background: $primary;
    color: $background;
    text-style: bold;
    border: solid $primary;
}

.control-btn {
    margin: 0 1;
    width: auto;
    min-width: 14;
    height: 3;
    background: $surface;
    color: #ffffff;
    border: solid $primary 50%;
    text-align: center;
}

#btn-quit,
#btn-stop {
    color: $error;
    border: solid $error;
}

#btn-quit:hover,
#btn-stop:hover {
    background: $error;
    color: $surface;
}

#btn-stop:disabled {
    background: $surface;
    color: #444444;
    border: solid #444444;
    opacity: 0.5;
}



#btn-quit:hover {
    background: $surface;
    color: $primary;
}

/* ==============================================================================
 * MODAL & DRY RUN STYLING (Warez Edition)
 * ============================================================================== */

/* Dark overlay behind the modal */
DryRunSelectScreen {
    background: rgba(0, 0, 0, 0.85);
    align: center middle;
}

/* The modal box itself */
#dryrun-dialog {
    background: #000000;
    border: solid #ffffff !important; /* Stark white border for Warez look */
    width: 50;
    height: auto;
    padding: 1 2;
}

/* Title text inside the modal */
#dryrun-dialog Label {
    width: 100%;
    text-align: center;
    color: #ffffff;
    text-style: bold;
    margin-bottom: 1;
    border-bottom: solid #333333;
    padding-bottom: 1;
}

/* --- WAREZ BUTTONS --- */

#dryrun-dialog Button {
    width: 100%;
    height: 3;
    margin-bottom: 1;
    background: #000000;
    border: solid #333333 !important; /* Dark grey default */
    color: #888888;
    text-style: bold;
}

/* Hover State: Aggressive White/Red High Contrast */
#dryrun-dialog Button:hover {
    background: #ffffff;
    border: solid #ffffff !important;
    color: #000000;
}

/* Primary Action Highlight */
#dry-auto {
    border-left: solid #ffffff !important;
    color: #ffffff;
}

/* Cancel Button */
#dry-cancel {
    margin-top: 1;
    border: none !important;
    color: #ff0000; /* Warez Red */
}

#dry-cancel:hover {
    background: #ff0000;
    color: #ffffff;
    border: none !important;
}

/* ==============================================================================
 * PREVIEW STATUS WIDGET
 * ============================================================================== */

#preview-status {
    background: #111111;
    border-left: solid #ffffff;
    padding: 0 1;
    margin-bottom: 1;
    height: auto;
}

#preview-status-bar {
    width: 100%;
    height: auto;
    align: left middle;
}

#preview-status-text {
    color: #ffffff;
    text-style: bold;
    width: 1fr;
}

#btn-execute-cached {
    background: #000000;
    border: solid #00ff00 !important; /* Matrix Green for execute */
    color: #00ff00;
    margin: 0 1;
    height: 3;
    min-width: 12;
}

#btn-execute-cached:hover {
    background: #00ff00;
    color: #000000;
}

#btn-forget-preview {
    background: #000000;
    border: solid #ff0000 !important;
    color: #ff0000;
    margin: 0 1;
    height: 3;
    min-width: 12;
}

#btn-forget-preview:hover {
    background: #ff0000;
    color: #ffffff;
}