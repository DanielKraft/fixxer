/* ==============================================================================
 * FIXXER ✞ PRO MODE CSS (Phantom Redline Edition)
 * "TACTICAL PRECISION"
 * ============================================================================== */

/* PALETTE: PHANTOM OPS 
 * Background: Pure Void Black (#000000)
 * Surface: Near Black (#111111)
 * Text: Muted Grey (#888888)
 * Accent: Pure White (#FFFFFF)
 * Redline: Automotive Red (#FF3333) - Used for critical stats/active states
 */

$background: #000000;
$surface: #111111;
$primary: #FFFFFF;
/* Stark White for Borders/Focus */
$text: #888888;
/* Muted text for low eye strain */
$redline: #FF3333;
/* The "Redline" Accent */

Screen {
    background: $background;
    color: $text;
    border: solid $surface;
}

/* ==============================================================================
 * Header & Branding - COMPACT LAYOUT
 * ============================================================================== */

#header-row {
    height: auto;
    width: 100%;
    layout: horizontal;
    align: left middle;
    border-bottom: solid $surface;
    padding: 1 2;
    margin-bottom: 0;
}

#logo {
    width: 35%;
    /* Match left-panel width so Easy+HUD aligns with Status & Logs */
    height: auto;
    text-align: left;
    color: $primary;
    text-style: bold;
    padding: 0;
    margin: 0;
}

/* "Easy" button - vertically centered with HUD */
#btn-easy {
    width: 8;
    height: 3;
    min-height: 3;
    max-height: 3;
    margin: 0 1 0 0;
    padding: 0;
    background: $surface;
    color: $primary;
    border: solid $surface;
    text-style: bold;
    text-align: center;
    align: center middle;
}

#btn-easy:hover {
    background: $redline;
    color: $primary;
    border: solid $redline;
}

.easy-btn {
    width: 8;
    height: 3;
    min-height: 3;
    max-height: 3;
    margin: 0 1 0 0;
    padding: 0;
    background: $surface;
    color: $primary;
    border: solid $surface;
    text-style: bold;
    text-align: center;
}

/* HUD in header - right after Easy button */
#milestone-hud {
    width: auto;
    height: auto;
    align: left middle;
    padding: 0;
    margin: 0;
}

#hud-layout {
    height: auto;
    width: auto;
    layout: horizontal;
    align: left middle;
}

#btn-easy:hover,
.easy-btn:hover {
    background: $redline;
    color: $primary;
    border: solid $redline;
}

.easy-btn:hover {
    background: $surface;
    color: $primary;
    border: solid $primary;
}

/* ==============================================================================
 * Layout Panels - Maximized vertical space
 * ============================================================================== */

#main-layout {
    height: 1fr;
    width: 100%;
}

.panel-title {
    height: auto;
    padding: 0 1;
    color: $primary;
    text-style: bold;
    background: $surface;
    margin-bottom: 1;
}

#left-panel {
    padding-right: 1;
    width: 35%;
    /* Narrower for portrait orientation */
}

#right-panel {
    padding-left: 1;
    width: 65%;
    /* Wider for landscape orientation */
}

/* ==============================================================================
 * Widgets
 * ============================================================================== */

Button {
    outline: none;
}

Button:focus {
    border: solid $primary;
}

/* --- Scrollbar Styling (Muted) --- */
Scrollbar {
    background: $surface;
    color: $text;
}

Scrollbar:hover {
    color: $primary;
}

Scrollbar.-active {
    color: $primary;
}

/* ==============================================================================
 * File Browser (The "Directory" Look)
 * ============================================================================== */

#file-browser-container {
    height: 1fr;
    background: $background;
    border: solid $surface;
    padding: 1;
}

DirectoryTree {
    background: $background;
    color: $text;
}

.directory-tree--guides {
    color: $surface;
}

.directory-tree--selected {
    background: $surface !important;
    color: $primary !important;
    text-style: bold;
    border-left: solid $redline;
    /* The Redline touch */
}

/* ==============================================================================
 * Telemetry & Status (The "Dashboard" Look)
 * ============================================================================== */

#status-bar {
    height: auto;
    margin-bottom: 1;
    padding: 0 1;
    background: $surface;
    border-left: solid $primary;
    color: $primary;
}

/* System Monitor Styles (used by RAM/CPU monitor widgets in footer) */
.sysmon-row {
    height: 100%;
    /* Fill parent height for proper centering */
    width: 100%;
    align: left middle;
    /* Align children to left, centered vertically */
    padding: 0;
}

.sysmon-label {
    width: 4;
    height: auto;
    color: $text;
    text-style: bold;
    text-align: left;
    content-align: left middle;
}

.sysmon-sparkline {
    width: 1fr;
    height: 1;
    /* Reduced height - sparklines only need 1 row */
    margin: 0;
}

.sysmon-value {
    width: 4;
    height: auto;
    text-align: right;
    color: $primary;
    text-style: bold;
    content-align: right middle;
}

.sysmon-error {
    color: $surface;
    text-align: center;
}

/* The Sparklines - White for normal, Red handled in Python for critical */
#ram-sparkline {
    color: $primary !important;
}

#cpu-sparkline {
    color: $primary !important;
}

/* ==============================================================================
 * Logs & Progress
 * ============================================================================== */

#log-panel {
    height: 1fr;
    min-height: 10;
    /* Reduced min since we have more space now */
}

#log-container {
    height: 1fr;
    background: $background;
    padding: 0 1;
    border: solid $surface;
    color: $text;
}

/* Spinner Area - Compact when idle */
#progress-container {
    height: auto;
    width: 100%;
    padding: 0 1;
    background: $surface;
    margin-bottom: 1;
    border: solid $surface;
    border-left: solid $redline;
    /* Active status indicator */
}

#progress-container.idle {
    /* Compact state when not running */
    padding: 0 1;
}

#progress-inner {
    height: auto;
    width: 100%;
}

#spinner-display {
    height: auto;
    padding-bottom: 0;
    text-align: center;
    color: $redline;
    text-style: bold;
}

#progress-phrase {
    height: auto;
    padding: 0;
    color: $text;
    /* Muted when idle */
    width: 1fr;
}

#progress-phrase.active {
    color: $primary;
    /* Bright when running */
}

#progress-timer {
    height: auto;
    color: $text;
    text-align: right;
    width: auto;
    padding: 0;
}

/* ==============================================================================
 * Footer Button Bar (HUD Layout)
 * ============================================================================== */

#button-bar {
    height: auto;
    width: 100%;
    layout: horizontal;
    align: center middle;
    padding: 0;
    /* Removed all padding */
    background: $background;
    border: none;
}

/* RAM Monitor (Left Bookend) */
#ram-monitor {
    width: 40;
    height: auto;
    /* Auto height to match button bar */
    min-height: 3;
    border-right: solid $surface;
    padding: 0 2;
    align: center middle;
    content-align: center middle;
}

/* CPU Monitor (Right Bookend) */
#cpu-monitor {
    width: 40;
    height: auto;
    /* Auto height to match button bar */
    min-height: 3;
    border-left: solid $surface;
    padding: 0 2;
    align: center middle;
    content-align: center middle;
}

/* Center Controls Container */
#controls-container {
    width: 1fr;
    height: auto;
    layout: horizontal;
    align: center middle;
    padding: 0 3;
    /* Increased from 2 for better separation from monitors */
}

.btn-group {
    height: auto;
    width: auto;
    align: center middle;
    margin: 0 2;
}

.workflow-btn,
.path-btn {
    margin: 0;
    width: auto;
    min-width: 8;
    padding: 0 0 0 0;
    background: $surface;
    color: #ffffff;
    text-style: bold;
    text-align: center;
    content-align: center middle;
    border: solid $surface;
}

.workflow-btn:hover,
.path-btn:hover,
.control-btn:hover {
    background: $primary;
    color: $background;
    text-style: bold;
    border: solid $primary;
}

.control-btn {
    margin: 0;
    width: auto;
    min-width: 14;
    height: 3;
    padding: 0 0 0 0;
    background: $surface;
    color: #ffffff;
    border: solid $surface;
    text-align: center;
    content-align: center middle;
}

/* "QUIT" Button - The Emergency Stop */
#btn-quit {
    background: $surface;
    color: $redline;
    text-style: bold;
    border: solid $surface;
}

#btn-quit:hover {
    background: $redline;
    color: $primary;
    border: solid $redline;
}

/* "STOP" Button - The Emergency Brake */
#btn-stop {
    background: $surface;
    color: $redline;
    text-style: bold;
    border: solid $surface;
}

#btn-stop:hover {
    background: $redline;
    color: $primary;
    border: solid $redline;
}

#btn-stop:disabled {
    background: $background;
    color: $surface;
    border: solid $surface;
}

/* ==============================================================================
 * FIXXER PRO MODE - MILESTONE HUD CSS
 * "TACTICAL DASHBOARD EXTENSION"
 * ============================================================================== */

/*
 * INSTALLATION INSTRUCTIONS:
 * Add this entire section to the END of photosort_pro.css
 */

/* ==============================================================================
 * MILESTONE HUD (Heads Up Display)
 * ============================================================================== */

/* Note: #milestone-hud and #hud-layout are defined in header section above */

/* === STAT BOX CONTAINERS - Compact for header === */
.hud-box {
    width: auto;
    min-width: 10;
    /* Optimized for smaller displays */
    height: auto;
    min-height: 3;
    /* Reduced height for header */
    margin: 0;
    /* Spacing between boxes */
    background: $background;
    /* Pure black #000000 */
    border: solid $surface;
    /* Subtle border (#111111) - barely visible */
    align: center middle;
    padding: 0 1;
}

/* Archived box needs extra width for the longer label */
#hud-archived {
    min-width: 12;
}

/* Subtle hover effect - barely visible border highlight */
.hud-box:hover {
    border: solid #1a1a1a;
    /* Slightly lighter than surface */
}

/* === LABELS (Top text in each box) === */
.hud-label {
    width: 100%;
    height: auto;
    text-align: center;
    color: $text;
    /* Muted grey #888888 */
    text-style: bold;
    padding-bottom: 0;
    padding-top: 0;
}

/* === VALUES (Bottom numbers in each box) === */
.hud-value {
    width: 100%;
    height: auto;
    text-align: center;
    color: $primary;
    /* White #FFFFFF */
    text-style: bold;
    padding-top: 0;
}

/* === TIER A/B/C MULTI-VALUE LAYOUT === */
.hud-multi-val {
    width: auto;
    height: auto;
    align: center middle;
    padding-top: 0;
}

/* Color-coded tier values */
.hud-val-a {
    width: auto;
    min-width: 4;
    /* Minimum width for alignment */
    text-align: center;
    color: $primary;
    /* White - best quality */
    text-style: bold;
}

.hud-val-b {
    width: auto;
    min-width: 4;
    /* Minimum width for alignment */
    text-align: center;
    color: $text;
    /* Grey - medium quality */
    text-style: bold;
}

.hud-val-c {
    width: auto;
    min-width: 4;
    /* Minimum width for alignment */
    text-align: center;
    color: $redline;
    /* Red #FF3333 - needs attention */
    text-style: bold;
}

/* Separator slashes between tier values */
.hud-sep {
    width: auto;
    color: $surface;
    /* Nearly invisible #111111 */
    padding: 0;
    margin: 0;
}

/* === INDIVIDUAL BOX CUSTOMIZATION === */

/* Bursts box - no special styling needed */
#hud-bursts {
    /* Inherits from .hud-box */
}

/* Tiers box - wider to fit A/B/C layout */
#hud-tiers {
    min-width: 15;
    /* Optimized for smaller displays while maintaining A/B/C alignment */
}

/* Heroes box - no special styling needed */
#hud-heroes {
    /* Inherits from .hud-box */
}

/* Archived box - no special styling needed */
#hud-archived {
    /* Inherits from .hud-box */
}

/* Time box - no special styling needed */
#hud-time {
    /* Inherits from .hud-box */
}

/* ==============================================================================
 * DESIGN NOTES
 * ============================================================================== */

/*
 * SUBTLE BORDER PHILOSOPHY:
 * - Borders use $surface (#111111) which is barely visible against $background (#000000)
 * - This creates a "ghost box" effect - present but not obtrusive
 * - On hover, boxes brighten slightly to #1a1a1a (still very subtle)
 * - The goal is information density without visual clutter
 *
 * COLOR HIERARCHY:
 * - Labels: Muted grey ($text #888888) - recedes into background
 * - Values: White ($primary #FFFFFF) - crisp, readable
 * - Tier A: White (excellence)
 * - Tier B: Grey (acceptable)
 * - Tier C: Red ($redline #FF3333) (requires attention)
 *
 * SPACING:
 * - Tight margins (1 unit between boxes)
 * - Minimal padding (0-1 units)
 * - Compact height (4 units) - maximizes vertical space
 * - Right-aligned to stay near Easy Archive button
 *
 * TACTICAL AESTHETIC:
 * - Clean, functional, no decoration
 * - Information at a glance
 * - Professional, not playful
 * - Complements the "TACTICAL PRECISION" tagline
 */

/* ==============================================================================
 * TESTING CHECKLIST
 * ============================================================================== */

/*
 * After adding this CSS:
 * 
 * ✅ Toggle Pro Mode (F12 in FIXXER)
 * ✅ Restart application
 * ✅ Check header layout (HUD should appear between logo and Easy Archive)
 * ✅ Verify boxes show "--" when idle
 * ✅ Run Auto Workflow
 * ✅ Watch boxes update in real-time:
 *    - BURSTS updates after burst detection
 *    - TIER A/B/C updates after culling
 *    - HEROES updates when files are selected
 *    - ARCHIVED updates when archiving completes
 *    - TIME shows "Running..." then "2m 34s" format
 * ✅ Verify borders are subtle (barely visible)
 * ✅ Verify tier colors (A=white, B=grey, C=red)
 * ✅ Test hover effect (slight border highlight)
 * 
 * If boxes are too wide:
 * - Reduce .hud-box width from 13 to 12 or 11
 * 
 * If borders are too visible:
 * - Change border color to $background (pure black)
 * - Or use "border: none;" for invisible borders
 * 
 * If text is too small:
 * - Cannot increase font size in Textual directly
 * - Consider adding more padding or using different units
 */

/* ==============================================================================
 * END OF HUD CSS
 * ============================================================================== */

/* ==============================================================================
 * MODAL & DRY RUN STYLING (Phantom Redline Edition)
 * ============================================================================== */

/* The dark overlay behind the modal */
DryRunSelectScreen {
    background: rgba(0, 0, 0, 0.85);
    align: center middle;
}

/* The Box Itself - Void Black with Red Alert Border */
#dryrun-dialog {
    background: $background;
    border: solid $redline !important; /* !important forces override of Python defaults */
    width: 50;
    height: auto;
    padding: 1 2;
}

/* Title text inside the box */
#dryrun-dialog Label {
    width: 100%;
    text-align: center;
    color: $primary;
    text-style: bold;
    margin-bottom: 1;
    border-bottom: solid $surface;
    padding-bottom: 1;
}

/* --- TACTICAL BUTTONS --- */

#dryrun-dialog Button {
    width: 100%;
    height: 3;
    margin-bottom: 1;
    background: $background;
    border: solid $surface !important; /* !important ensures we don't get bulky default border */
    color: $text;
    text-style: bold;
}

/* Hover State: The "Redline" Activation */
#dryrun-dialog Button:hover {
    background: $surface;
    border: solid $redline !important; /* Lights up red on hover */
    color: $primary;
}

/* Primary Action (Auto Workflow) - Subtle highlight */
#dry-auto {
    border-left: solid $redline !important; /* Little red tag on the left */
    color: $primary;
}

/* Cancel Button - Pushed to bottom, clearly different */
#dry-cancel {
    margin-top: 1;
    border: none !important; /* No border makes it look less like a button */
    color: $redline;
}

#dry-cancel:hover {
    background: $redline;
    color: $background;
    border: none !important;
}

/* ==============================================================================
 * PREVIEW STATUS WIDGET (The "After Action" Report)
 * ============================================================================== */

#preview-status {
    background: $surface;
    border-left: solid $primary;
    padding: 0 1;
    margin-bottom: 1;
    height: auto;
}

#preview-status-bar {
    width: 100%;
    height: auto;
    align: left middle;
}

#preview-status-text {
    color: $primary;
    text-style: bold;
    width: 1fr;
}

#btn-execute-cached {
    background: $background;
    border: solid $primary !important;
    color: $primary;
    margin: 0;
    height: 3;
    min-width: 12;
}

#btn-execute-cached:hover {
    background: $primary;
    color: $background;
}

#btn-forget-preview {
    background: $background;
    border: solid $redline !important;
    color: $redline;
    margin: 0;
    height: 3;
    min-width: 12;
}

#btn-forget-preview:hover {
    background: $redline;
    color: $background;
}